
---
title: "rbac.proto"
weight: 5
---

<!-- Code generated by solo-kit. DO NOT EDIT. -->


### Package: `istio.rbac.v1alpha1`  
source: https://raw.githubusercontent.com/istio/api/release-1.3/rbac/v1alpha1/rbac.proto
latest commit at time of inclusion: https://github.com/istio/api/commit/3a122a92eae33097a16c914e9f07f034bda20cf6
modified for use with solo-kit code generation  
Copyright 2019 Istio Authors

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.


 
#### Types:


- [RbacConfig](#rbacconfig) **Top-Level Resource**
- [Target](#target)
- [Mode](#mode)
  

 

##### Enums:


	- [EnforcementMode](#enforcementmode)



##### Source File: [github.com/solo-io/mesh-projects/api/external/istio/rbac/v1alpha1/rbac.proto](https://github.com/solo-io/mesh-projects/blob/master/api/external/istio/rbac/v1alpha1/rbac.proto)





---
### RbacConfig

 
// ServiceRoleBinding assigns a ServiceRole to a list of subjects.
message ServiceRoleBinding {
   // Required. List of subjects that are assigned the ServiceRole object.
   repeated Subject subjects = 1;

   // Required. Reference to the ServiceRole object.
   RoleRef roleRef = 2;

   // $hide_from_docs
   // Indicates enforcement mode of the ServiceRoleBinding.
   EnforcementMode mode = 3;

   // $hide_from_docs
   // Inline role definition. An inline role is a role that is defined inside an
   // authorization policy, instead of explicitly defined in a ServiceRole object.
   // Inline roles can be used for the role definitions that are not intended to
   // be reused in other bindings, while explicit roles are reusable. Both inline
   // roles (defined in "actions" field) and explicit roles (defined in ServiceRole)
   // are supported. Users should use only one of them in a single binding.
   // For example, the following “product-frontend” AuthorizationPolicy allows “frontend”
   // service to view “product” service on “/info” path.
   // ```yaml
   // apiVersion: "rbac.istio.io/v1alpha1"
   // kind: AuthorizationPolicy
   // metadata:
   //  name: product-frontend
   //  namespace: ns1
   // spec:
   //  selector:
   //    labels:
   //      app: product
   //  allow:
   //  - subjects:
   //    - names: ["cluster.local/ns/default/sa/frontend"]
   //    actions:
   //    - paths: ["/info"]
   //      methods: ["GET"]
   // Required. The set of access rules (permissions) that the role has.
   repeated AccessRule actions = 4;

   // $hide_from_docs
   // A `role` inside a ServiceRoleBinding refers to the ServiceRole that this
   // ServiceRoleBinding binds to. A ServiceRoleBinding can bind to a ServiceRole
   // in the same namespace or the root namespace. A ServiceRole in the root namespace
   // represents a mesh global ServiceRole.
   // The value of `role` is the name of the ServiceRole, and it can start with or without a forward slash ("/").
   // When a `role` starts with "/", e.g. "/service-viewer", it means that this ServiceRoleBinding
   // refers to the ServiceRole in the configurable Istio root namespace.
   // When a `role` starts without "/", this ServiceRoleBinding refers to the ServiceRole in the
   // same namespace as the AuthorizationPolicy's, which contains said ServiceRoleBinding.
   string role = 5;
}

// Subject defines an identity. The identity is either a user or identified by a set of `properties`.
// The supported keys in `properties` are listed in "constraint and properties" page.
message Subject {
   // Optional. The user name/ID that the subject represents.
   string user = 1;

   // $hide_from_docs
   // Optional. A list of subject names. This is matched to the
   // `source.principal` attribute. If one of subject names is "*", it matches to a subject with any name.
   // Prefix and suffix matches are supported.
   repeated string names = 4;

   // $hide_from_docs
   // Optional. A list of subject names that must not be matched.
   repeated string not_names = 5;

   // $hide_from_docs
   // Optional. The group that the subject belongs to.
   // Deprecated. Use groups and not_groups instead.
   string group = 2 [deprecated = true];

   // $hide_from_docs
   // Optional. A list of groups that the subject represents. This is matched to the
   // `request.auth.claims[groups]` attribute. If not specified, it applies to any groups.
   repeated string groups = 6;

   // $hide_from_docs
   // Optional. A list of groups that must not be matched.
   repeated string not_groups = 7;

   // $hide_from_docs
   // Optional. A list of namespaces that the subject represents. This is matched to
   // the `source.namespace` attribute. If not specified, it applies to any namespaces.
   repeated string namespaces = 8;

   // $hide_from_docs
   // Optional. A list of namespaces that must not be matched.
   repeated string not_namespaces = 9;

   // $hide_from_docs
   // Optional. A list of IP address or CIDR ranges that the subject represents.
   // E.g. 192.168.100.2 or 10.1.0.0/16. If not specified, it applies to any IP addresses.
   repeated string ips = 10;

   // $hide_from_docs
   // Optional. A list of IP addresses or CIDR ranges that must not be matched.
   repeated string not_ips = 11;

   // Optional. The set of properties that identify the subject.
   map<string, string> properties = 3;

   // $hide_from_docs
   // Next available field number: 12
}

// RoleRef refers to a role object.
message RoleRef {
   // Required. The type of the role being referenced.
   // Currently, "ServiceRole" is the only supported value for "kind".
   string kind = 1;

   // Required. The name of the ServiceRole object being referenced.
   // The ServiceRole object must be in the same namespace as the ServiceRoleBinding object.
   string name = 2;
}

// RbacConfig implements the ClusterRbaConfig Custom Resource Definition for controlling Istio RBAC behavior.
// The ClusterRbaConfig Custom Resource is a singleton where only one ClusterRbaConfig should be created
// globally in the mesh and the namespace should be the same to other Istio components, which usually is `istio-system`.
//
// Below is an example of an `ClusterRbacConfig` resource called `istio-rbac-config` which enables Istio RBAC for all
// services in the default namespace.
//
// ```yaml
// apiVersion: "rbac.istio.io/v1alpha1"
// kind: ClusterRbacConfig
// metadata:
//   name: default
//   namespace: istio-system
// spec:
//   mode: ON_WITH_INCLUSION
//   inclusion:
//     namespaces: [ "default" ]
// ```

```yaml
"status": .core.solo.io.Status
"metadata": .core.solo.io.Metadata
"mode": .istio.rbac.v1alpha1.RbacConfig.Mode
"inclusion": .istio.rbac.v1alpha1.RbacConfig.Target
"exclusion": .istio.rbac.v1alpha1.RbacConfig.Target
"enforcementMode": .istio.rbac.v1alpha1.EnforcementMode

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 
| `status` | [.core.solo.io.Status](../../../../../../../solo-kit/api/v1/status.proto.sk/#status) | Status indicates the validation status of this resource. Status is read-only by clients, and set by operator during validation. |  |
| `metadata` | [.core.solo.io.Metadata](../../../../../../../solo-kit/api/v1/metadata.proto.sk/#metadata) | Metadata contains the object metadata for this resource. |  |
| `mode` | [.istio.rbac.v1alpha1.RbacConfig.Mode](../rbac.proto.sk/#mode) | Istio RBAC mode. |  |
| `inclusion` | [.istio.rbac.v1alpha1.RbacConfig.Target](../rbac.proto.sk/#target) | A list of services or namespaces that should be enforced by Istio RBAC policies. Note: This field have effect only when mode is ON_WITH_INCLUSION and will be ignored for any other modes. |  |
| `exclusion` | [.istio.rbac.v1alpha1.RbacConfig.Target](../rbac.proto.sk/#target) | A list of services or namespaces that should not be enforced by Istio RBAC policies. Note: This field have effect only when mode is ON_WITH_EXCLUSION and will be ignored for any other modes. |  |
| `enforcementMode` | [.istio.rbac.v1alpha1.EnforcementMode](../rbac.proto.sk/#enforcementmode) | $hide_from_docs Indicates enforcement mode of the RbacConfig, in ENFORCED mode by default. It's used to verify new RbacConfig work as expected before rolling to production. When setting as PERMISSIVE, RBAC isn't enforced and has no impact on users. RBAC engine run RbacConfig in PERMISSIVE mode and logs stats. Invalid to set RbacConfig in PERMISSIVE and ServiceRoleBinding in ENFORCED mode. |  |




---
### Target

 
Target defines a list of services or namespaces.

```yaml
"services": []string
"namespaces": []string

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 
| `services` | `[]string` | A list of services. |  |
| `namespaces` | `[]string` | A list of namespaces. |  |




---
### Mode



| Name | Description |
| ----- | ----------- | 
| `OFF` | Disable Istio RBAC completely, Istio RBAC policies will not be enforced. |
| `ON` | Enable Istio RBAC for all services and namespaces. Note Istio RBAC is deny-by-default which means all requests will be denied if it's not allowed by RBAC rules. |
| `ON_WITH_INCLUSION` | Enable Istio RBAC only for services and namespaces specified in the inclusion field. Any other services and namespaces not in the inclusion field will not be enforced by Istio RBAC policies. |
| `ON_WITH_EXCLUSION` | Enable Istio RBAC for all services and namespaces except those specified in the exclusion field. Any other services and namespaces not in the exclusion field will be enforced by Istio RBAC policies. |



  
### EnforcementMode

Description: $hide_from_docs
RBAC ServiceRoleBinding enforcement mode, used to verify new ServiceRoleBinding
configs work as expected before rolling to production. RBAC engine only logs results
from configs that are in permissive mode, and discards result before returning
to the user.

| Name | Description |
| ----- | ----------- | 
| ENFORCED | Policy in ENFORCED mode has impact on user experience. Policy is in ENFORCED mode by default. |
| PERMISSIVE | Policy in PERMISSIVE mode isn't enforced and has no impact on users. RBAC engine run policies in PERMISSIVE mode and logs stats. |


<!-- Start of HubSpot Embed Code -->
<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/5130874.js"></script>
<!-- End of HubSpot Embed Code -->
